<VirtualHost :*80>
    ServerName icinga.miraheze.org

    DocumentRoot /usr/share/icinga/htdocs

    Alias /stylesheets /etc/icinga/stylesheets

    SSLEngine On
    SSLCertificateFile /etc/ssl/certs/wildcard.miraheze.org.crt
    SSLCertificateKeyFile /etc/ssl/private/wildcard.miraheze.org.key

    <Directory "^(?:/usr/share/icinga/htdocs|/usr/lib/cgi-bin/icinga|/etc/icinga/stylesheets)/">
        Options FollowSymLinks
        DirectoryIndex index.html

        AllowOverride AuthConfig
        Require all granted

        AuthName "Icinga Access - guest access: username 'guest', leave password field empty"
        AuthType Basic
        AuthUserFile /etc/icinga/htpasswd.users
        Require valid-user
    </Directory>

    ErrorLog ${APACHE_LOG_DIR}/error.log

    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    LogLevel warn

    CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost>
